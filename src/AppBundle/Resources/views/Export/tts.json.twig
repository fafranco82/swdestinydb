{% set backUrl = "http://cloud-3.steamusercontent.com/ugc/102850418890247821/C495C2DA41D081A5CD513AC62BE8F69775DC5ADB/" %}
{% set guidCount = 0 %}
{
	"SaveName": "",
	"GameMode": "",
	"Date": "",
	"Table": "",
	"Sky": "",
	"Note": "",
	"Rules": "",
	"PlayerTurn": "",
	"LuaScript": "",
	"LuaScriptState": "",
	"ObjectStates": [
		{
			"Name": "Bag",
			"Transform": {
				"posX": {{ random(999) /1000 }},
				"posY": {{ random(999) /1000 }},
				"posZ": {{ random(999) /1000 }},
				"rotX": {{ random(999) /1000 }},
				"rotY": 180,
				"rotZ": {{ random(999) /1000 }},
				"scaleX": 1,
				"scaleY": 1,
				"scaleZ": 1
			},
			"Nickname": "{{ deck.name|replace({"\"":"\\\""})|raw }}",
			"Description": "Exported from SWDestinyDB.com",
			"ColorDiffuse": {
				"r": 0.129,
				"g": 0.694,
				"b": 0.607
			},
			"Locked": false,
			"Grid": true,
			"Snap": true,
			"Autoraise": true,
			"Sticky": true,
			"Tooltip": true,
			"MaterialIndex": -1,
			"MeshIndex": -1,
			"LuaScript": "",
			"LuaScriptState": "",
			"ContainedObjects": [
        {# BattleField #}
				{% for battlefield in deck.slots_by_type.battlefield %}
				{
					"Name": "Card",
					"Transform": {
						"posX": {{ random(999) /1000 }},
						"posY": {{ random(999) /1000 }},
						"posZ": {{ random(999) /1000 }},
						"rotX": {{ random(999) /1000 }},
						"rotY": 270,
						"rotZ": {{ random(999) /1000 }},
						"scaleX": 1.42055011,
						"scaleY": 1,
						"scaleZ": 1.42055011
					},
					"Nickname": "{{ battlefield.card.name|replace({"\"":"\\\""})|raw }}",
					"Description": "{{battlefield.card.set.code}} {{battlefield.card.position}}",
					"ColorDiffuse": {
						"r": 0.713235259,
						"g": 0.713235259,
						"b": 0.713235259
					},
					"Locked": false,
					"Grid": true,
					"Snap": true,
					"Autoraise": true,
					"Sticky": true,
					"Tooltip": true,
					"CardID": {{ battlefield.card.ttscardid }},
					"SidewaysCard": true,
					"CustomDeck": {
                  {# All Battlefields use CustomDeck 18 #}
                  "18": {
                     "FaceURL": "http://drive.google.com/uc?id=0B0v-LHuAfe7LUHgyNXVudlY4OVE",
                     "BackURL": "{{backUrl}}",
                     "NumWidth": 10,
                     "NumHeight": 7,
                     "BackIsHidden": true,
                     "UniqueBack": false
                  }
					},
					"LuaScript": "",
					"LuaScriptState": "",
					"GUID": "{{ deck.guidArray[guidCount] }}"
					{% set guidCount = guidCount + 1 %}
				},
				{% endfor %}
				{# Plot #}
				{% for plot in deck.slots_by_type.plot %}
				{
					"Name": "Card",
					"Transform": {
						"posX": {{ random(999) /1000 }},
						"posY": {{ random(999) /1000 }},
						"posZ": {{ random(999) /1000 }},
						"rotX": {{ random(999) /1000 }},
						"rotY": {{ random(999) /1000 }},
						"rotZ": {{ random(999) /1000 }},
						"scaleX": 1.42055011,
						"scaleY": 1,
						"scaleZ": 1.42055011
					},
					"Nickname": "{{ plot.card.name|replace({"\"":"\\\""})|raw }}",
					"Description": "{{plot.card.set.code}} {{plot.card.position}}",
					"ColorDiffuse": {
						"r": 0.713235259,
						"g": 0.713235259,
						"b": 0.713235259
					},
					"Locked": false,
					"Grid": true,
					"Snap": true,
					"Autoraise": true,
					"Sticky": true,
					"Tooltip": true,
					"CardID": {{ plot.card.ttscardid }},
					"SidewaysCard": false,
					"CustomDeck": {
						{# All Plots use CustomDeck 473 #}
						"473": {
							"FaceURL": "http://cloud-3.steamusercontent.com/ugc/910157197472506127/6038134EFC06C9B338C589EA58F3638B38B47AAF/",
							"BackURL": "{{backUrl}}",
							"NumWidth": 10,
							"NumHeight": 7,
							"BackIsHidden": true,
							"UniqueBack": false
						}
					},
					"LuaScript": "",
					"LuaScriptState": "",
					"GUID": "{{ deck.guidArray[guidCount] }}"
					{% set guidCount = guidCount + 1 %}
				},
				{% endfor %}
				{# Characters #}
				{% for slot in deck.slots_by_type.character %}
				{% set slotLabel = slot.card.name~(slot.card.subtitle is defined and slot.card.subtitle != "" ? ", "~slot.card.subtitle : "")%}
				{% for i in range (1, min(slot.dice,slot.card.deckLimit)) %}
				{
			    "Name": "Card",
			    "Transform": {
			      "posX": {{ random(999) /1000 }},
			      "posY": {{ random(999) /1000 }},
			      "posZ": {{ random(999) /1000 }},
			      "rotX": {{ random(999) /1000 }},
			      "rotY": {{ random(999) /1000 }},
			      "rotZ": {{ random(999) /1000 }},
			      "scaleX": 1.42055011,
			      "scaleY": 1.0,
			      "scaleZ": 1.42055011
			    },
			    "Nickname": "{{ slotLabel|replace({"\"":"\\\""})|raw }}",
			    "Description": "{% if slot.dice == 2 and slot.card.deckLimit == 1 %}elite {% endif %}{{slot.card.set.code}} {{slot.card.position}}",
			    "ColorDiffuse": {
			      "r": 0.713235259,
			      "g": 0.713235259,
			      "b": 0.713235259
			    },
			    "Locked": false,
			    "Grid": true,
			    "Snap": true,
			    "Autoraise": true,
			    "Sticky": true,
			    "Tooltip": true,
			    "CardID": {{ slot.card.ttscardid }},
			    "SidewaysCard": false,
			    "CustomDeck": {
			      "13": {
			        "FaceURL": "http://drive.google.com/uc?id=0B0v-LHuAfe7LX3UxM0ctWVRyTmc",
			        "BackURL": "{{backUrl}}",
			        "NumWidth": 10,
			        "NumHeight": 7,
			        "BackIsHidden": true,
			        "UniqueBack": false
			      }
			    },
			    "LuaScript": "",
			    "LuaScriptState": "",
					"GUID": "{{ deck.guidArray[guidCount] }}"
					{% set guidCount = guidCount + 1 %}
			  },
				{% endfor %}
				{% endfor %}
				{# Deck of Other Cards #}
				{
					"Name": "Deck",
					"Transform": {
						"posX": {{ random(999) /1000 }},
						"posY": {{ random(999) /1000 }},
						"posZ": {{ random(999) /1000 }},
						"rotX": {{ random(999) /1000 }},
						"rotY": {{ random(999) /1000 }},
						"rotZ": 180,
						"scaleX": 1.42055011,
						"scaleY": 1,
						"scaleZ": 1.42055011
					},
					"Nickname": "Events, Supports, Upgrades",
					"Description": "",
					"ColorDiffuse": {
						"r": 0.713235259,
						"g": 0.713235259,
						"b": 0.713235259
					},
					"Locked": false,
					"Grid": true,
					"Snap": true,
					"Autoraise": true,
					"Sticky": true,
					"Tooltip": true,
					"SidewaysCard": false,
					"DeckIDs": [
{% set allSlots = deck.slots_by_type.upgrade %}
{% set allSlots = allSlots|merge(deck.slots_by_type.downgrade) %}
{% set allSlots = allSlots|merge(deck.slots_by_type.support) %}
{% set allSlots = allSlots|merge(deck.slots_by_type.event) %}
{% for slot in allSlots %}
{% for i in range (1,slot.quantity) %}
					{{ slot.card.ttscardid }}{% if (not loop.parent.loop.last) or (loop.parent.loop.last and not loop.last) %},
{% endif %}
{% endfor %}
{% endfor %}

					],
					"CustomDeck": {
						"13": {
							"FaceURL": "http://drive.google.com/uc?id=0B0v-LHuAfe7LX3UxM0ctWVRyTmc",
							"BackURL": "{{backUrl}}",
							"NumWidth": 10,
							"NumHeight": 7,
							"BackIsHidden": true,
							"UniqueBack": false
						},
						"14": {
							"FaceURL": "http://drive.google.com/uc?id=0B0v-LHuAfe7LbWxBTlVoVUZ0QkE",
							"BackURL": "{{backUrl}}",
							"NumWidth": 10,
							"NumHeight": 7,
							"BackIsHidden": true,
							"UniqueBack": false
						},
						"19": {
							"FaceURL": "http://drive.google.com/uc?id=0B0v-LHuAfe7LR09TdWYtUkloUzQ",
							"BackURL": "{{backUrl}}",
							"NumWidth": 10,
							"NumHeight": 7,
							"BackIsHidden": true,
							"UniqueBack": false
						},
						"22": {
							"FaceURL": "http://cloud-3.steamusercontent.com/ugc/87099658840041859/705089CFD0C34899FB3E42BA0D3876C35DB344C6/",
							"BackURL": "{{backUrl}}",
							"NumWidth": 10,
							"NumHeight": 7,
							"BackIsHidden": true,
							"UniqueBack": false
						},
						"23": {
							"FaceURL": "http://cloud-3.steamusercontent.com/ugc/87099658839675034/9D44369D8E610149D33AB7498508159E965B9E87/",
							"BackURL": "{{backUrl}}",
							"NumWidth": 10,
							"NumHeight": 7,
							"BackIsHidden": true,
							"UniqueBack": false
						},
						"24": {
							"FaceURL": "http://cloud-3.steamusercontent.com/ugc/87099658839856357/A85592A456EC31A220A8B9FCF39099378D4AA92F/",
							"BackURL": "{{backUrl}}",
							"NumWidth": 10,
							"NumHeight": 7,
							"BackIsHidden": true,
							"UniqueBack": false
						},
						"1": {
							"FaceURL": "http://cloud-3.steamusercontent.com/ugc/858354911724386771/892B79793EE86A4BAB29B487F313BA2F1D86E16B/",
							"BackURL": "{{backUrl}}",
							"NumWidth": 10,
							"NumHeight": 7,
							"BackIsHidden": true,
							"UniqueBack": false
						},
						"25": {
							"FaceURL": "http://cloud-3.steamusercontent.com/ugc/869614971446942640/7A5C06F273A82BB74B0A9351D835D0C24E213003/",
							"BackURL": "{{backUrl}}",
							"NumWidth": 10,
							"NumHeight": 7,
							"BackIsHidden": true,
							"UniqueBack": false
						},
						"26": {
							"FaceURL": "http://cloud-3.steamusercontent.com/ugc/869614971446949526/DAF4C217B2F790AE91A387A96BD8E9E9EC8000B2/",
							"BackURL": "{{backUrl}}",
							"NumWidth": 10,
							"NumHeight": 7,
							"BackIsHidden": true,
							"UniqueBack": false
						},
						"27": {
							"FaceURL": "http://cloud-3.steamusercontent.com/ugc/869614971446951260/8A3BDCF34E9D60A070ED753C9E15EF10A99D55BD/",
							"BackURL": "{{backUrl}}",
							"NumWidth": 10,
							"NumHeight": 7,
							"BackIsHidden": true,
							"UniqueBack": false
						}
					},
					"LuaScript": "",
					"LuaScriptState": "",
					"ContainedObjects": [
						{% for slot in allSlots %}
						{% set slotLabel = slot.card.name~(slot.card.subtitle is defined and slot.card.subtitle != "" ? ", "~slot.card.subtitle : "")%}
						{% for i in range (1,slot.quantity) %}
							{
			          "Name": "Card",
			          "Transform": {
			            "posX": {{ random(999) /1000 }},
			            "posY": {{ random(999) /1000 }},
			            "posZ": {{ random(999) /1000 }},
			            "rotX": {{ random(999) /1000 }},
			            "rotY": {{ random(999) /1000 }},
			            "rotZ": {{ random(999) /1000 }},
			            "scaleX": 1.42055011,
			            "scaleY": 1.0,
			            "scaleZ": 1.42055011
			          },
			          "Nickname": "{{ slotLabel|replace({"\"":"\\\""})|raw }}",
			          "Description": "{{slot.card.set.code}} {{slot.card.position}}",
			          "ColorDiffuse": {
			            "r": 0.713235259,
			            "g": 0.713235259,
			            "b": 0.713235259
			          },
			          "Locked": false,
			          "Grid": true,
			          "Snap": true,
			          "Autoraise": true,
			          "Sticky": true,
			          "Tooltip": true,
			          "CardID": {{ slot.card.ttscardid }},
			          "SidewaysCard": false,
			          "CustomDeck": {
									{% if slot.card.ttscardid|length == 3 and slot.card.ttscardid[:1] == 1 %}	
										"1": {
											"FaceURL": "http://cloud-3.steamusercontent.com/ugc/858354911724386771/892B79793EE86A4BAB29B487F313BA2F1D86E16B/",
											"BackURL": "{{backUrl}}",
											"NumWidth": 10,
											"NumHeight": 7,
											"BackIsHidden": true,
											"UniqueBack": false
										}
									{% elseif slot.card.ttscardid[:2] == 13 %}
										"13": {
											"FaceURL": "http://drive.google.com/uc?id=0B0v-LHuAfe7LX3UxM0ctWVRyTmc",
											"BackURL": "{{backUrl}}",
											"NumWidth": 10,
											"NumHeight": 7,
											"BackIsHidden": true,
											"UniqueBack": false
										}
									{% elseif slot.card.ttscardid[:2] == 14 %}
										"14": {
											"FaceURL": "http://drive.google.com/uc?id=0B0v-LHuAfe7LbWxBTlVoVUZ0QkE",
											"BackURL": "{{backUrl}}",
											"NumWidth": 10,
											"NumHeight": 7,
											"BackIsHidden": true,
											"UniqueBack": false
										}
									{% elseif slot.card.ttscardid[:2] == 19 %}
										"19": {
											"FaceURL": "http://drive.google.com/uc?id=0B0v-LHuAfe7LR09TdWYtUkloUzQ",
											"BackURL": "{{backUrl}}",
											"NumWidth": 10,
											"NumHeight": 7,
											"BackIsHidden": true,
											"UniqueBack": false
										} 
									{% elseif slot.card.ttscardid[:2] == 22 %}
										"22": {
											"FaceURL": "http://cloud-3.steamusercontent.com/ugc/87099658840041859/705089CFD0C34899FB3E42BA0D3876C35DB344C6/",
											"BackURL": "{{backUrl}}",
											"NumWidth": 10,
											"NumHeight": 7,
											"BackIsHidden": true,
											"UniqueBack": false
										}
									{% elseif slot.card.ttscardid[:2] == 23 %}
										"23": {
											"FaceURL": "http://cloud-3.steamusercontent.com/ugc/87099658839675034/9D44369D8E610149D33AB7498508159E965B9E87/",
											"BackURL": "{{backUrl}}",
											"NumWidth": 10,
											"NumHeight": 7,
											"BackIsHidden": true,
											"UniqueBack": false
										}
									{% elseif slot.card.ttscardid[:2] == 24 %}
										"24": {
											"FaceURL": "http://cloud-3.steamusercontent.com/ugc/87099658839856357/A85592A456EC31A220A8B9FCF39099378D4AA92F/",
											"BackURL": "{{backUrl}}",
											"NumWidth": 10,
											"NumHeight": 7,
											"BackIsHidden": true,
											"UniqueBack": false
										}
									{% elseif slot.card.ttscardid[:2] == 25 %}
										"25": {
											"FaceURL": "http://cloud-3.steamusercontent.com/ugc/869614971446942640/7A5C06F273A82BB74B0A9351D835D0C24E213003/",
											"BackURL": "{{backUrl}}",
											"NumWidth": 10,
											"NumHeight": 7,
											"BackIsHidden": true,
											"UniqueBack": false
										}
									{% elseif slot.card.ttscardid[:2] == 26 %}
										"26": {
											"FaceURL": "http://cloud-3.steamusercontent.com/ugc/869614971446949526/DAF4C217B2F790AE91A387A96BD8E9E9EC8000B2/",
											"BackURL": "{{backUrl}}",
											"NumWidth": 10,
											"NumHeight": 7,
											"BackIsHidden": true,
											"UniqueBack": false
										}
									{% elseif slot.card.ttscardid[:2] == 27 %}
										"27": {
											"FaceURL": "http://cloud-3.steamusercontent.com/ugc/869614971446951260/8A3BDCF34E9D60A070ED753C9E15EF10A99D55BD/",
											"BackURL": "{{backUrl}}",
											"NumWidth": 10,
											"NumHeight": 7,
											"BackIsHidden": true,
											"UniqueBack": false
										}
									{% endif %}
			          },
			          "LuaScript": "",
			          "LuaScriptState": "",
								"GUID": "{{ deck.guidArray[guidCount] }}"
								{% set guidCount = guidCount + 1 %}
			        }{% if (not loop.parent.loop.last) or (loop.parent.loop.last and not loop.last) %},{% endif %}
						{% endfor %}
						{% endfor %}
					],
					"GUID": "{{ deck.guidArray[guidCount] }}"
					{% set guidCount = guidCount + 1 %}
				}
      ],
			"GUID": "{{ deck.guidArray[guidCount] }}"
			{% set guidCount = guidCount + 1 %}
		}
	],
	"TabStates": {}
}

